"use strict";(self.webpackChunkRDV_ADDICTOLOGUE_COM=self.webpackChunkRDV_ADDICTOLOGUE_COM||[]).push([[716],{1716:(e,t,a)=>{a.r(t),a.d(t,{Container:()=>f,default:()=>y});var r=a(2791),i=a(3473),n=a(2367),o=a(5764),s=a(4569),c=a.n(s),d=a(3623),l=a(6323),m=a(5841),p=a(8329),u=a(184);const f=e=>{let{children:t}=e;return(0,u.jsxs)("div",{className:"max-w-lg mx-auto px-2.5 py-6 roboto overflow-hidden",children:[(0,u.jsx)("div",{className:"h-10 mx-auto flex flex-col items-center justify-center",children:(0,u.jsx)("img",{src:n,alt:"Bienvenue chez Sarah Nacass",className:"h-full"})}),(0,u.jsx)("div",{className:"py-6 px-4 mt-6 border border-solid border-gray-200 shadow-lg shadow-gray-300/50 rounded-md relative overflow-hidden",children:t}),(0,u.jsx)("div",{className:"text-xs text-gray-400 text-center my-5 max-w-md mx-auto",children:"Nous s\xe9curisons toutes vos donn\xe9es personnelles et coordonn\xe9es bancaires avec la technologie SSL et le protocole s\xe9curis\xe9 Stripe. Aussi vos informations personnelles ne seront jamais partag\xe9es \xe0 des services tiers ou \xe0 des fins commerciales, car nous respectons votre vie priv\xe9e."})]})},h=e=>{let{price:t}=e;const a=(0,o.useStripe)(),i=(0,o.useElements)(),[n,s]=(0,r.useState)(!1),[c,l]=(0,r.useState)(null);return(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!a||!i)return;s(!0);const{error:t}=await a.confirmPayment({elements:i,confirmParams:{return_url:"".concat(window.location.origin,"/checkout/success")}});if(t){l(t.message);const e=JSON.parse(localStorage.getItem("last_booking_operation")).informations.tarif;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"paiement",montant:e.value/100,devise:e.currency,statut_paiement:t.message})}s(!1)},className:"sm:px-1",children:[c&&(0,u.jsxs)("div",{className:"text-red-600 bg-red-50 text-center px-2 py-2.5 mb-3 top-0 border border-red-400 rounded font-medium z-30",children:["Attention : ",c]}),(0,u.jsxs)("div",{className:"text-center text-portal-700 font-medium text-lg",children:["R\xe8glement de l'accompagnement (",t,")"]}),(0,u.jsx)("div",{className:"mx-auto max-w-min mt-1",children:(0,u.jsxs)("div",{className:"text-center text-gray-400 text-sm mb-5 flex min-w-max items-start flex-row gap-2 mx-auto",children:[(0,u.jsx)(d.Z,{size:16})," Votre paiement est enti\xe8rement s\xe9curis\xe9"]})}),(0,u.jsx)(o.PaymentElement,{}),(0,u.jsx)("button",{type:"submit",disabled:n,className:"w-full disabled:opacity-60 font-medium\r disabled:cursor-progress py-3 mt-5 bg-gradient-to-r from-fusion-500 hover:shadow-xl duration-150 to-portal-500 text-white rounded-md shadow-md hover:bg-portal-600 focus:outline-none focus:ring-2 focus:ring-portal-500 focus:ring-opacity-50",children:n?(0,u.jsx)(r.Fragment,{children:(0,u.jsx)("div",{className:"border-t-2 border-white rounded-full mx-auto animate-spin w-4 h-4"})}):"Payer"})]})},y=()=>{const e={theme:"stripe",variables:{colorPrimary:"#2f7dc0",colorBackground:"#ffffff",colorText:"#30313d",fontFamily:"Roboto, sans-serif"}},[t,a]=(0,r.useState)(!0),[n,s]=(0,r.useState)(null),[d,y]=(0,r.useState)(null),[v,x]=(0,r.useState)(null),[b,w]=(0,r.useState)(null);if((0,r.useEffect)((()=>{(async()=>{const e=new URLSearchParams(window.location.search);if(e.has("intent")){const t=e.get("intent");x(t)}else s("Une erreur s'est produite lors d'une v\xe9rification avec notre service de paiement. V\xe9rifiez que le lien de paiement est valide et r\xe9essayez.")})()}),[]),(0,r.useEffect)((()=>{(async()=>{const e=new URLSearchParams(window.location.search);try{if(e.has("appointmentTypeSelected")){const t=e.get("id");throw"video"==e.get("appointmentTypeSelected")?l.H.forEach((async e=>{if(t.includes(e.idLocation)){let t={tarif_visio:e.tarif,tarif_cabinet:e.tarif};if(p.Z.get("promotion"))try{const a="https://rdv.sarahnacass.com/api/verificate/promocode";t=(await c().post(a,{promocode:p.Z.get("promotion"),formation:e.formation,tarif_visio:t.tarif_visio,tarif_cabinet:t.tarif_cabinet})).data.data}catch{}return w((t.tarif_visio.value/100).toFixed(2).replace(".",",")+" "+t.tarif_visio.symbol||"0,00 \u20ac (prix ind\xe9fini dans le fichier .env)")}})):m.Kl.forEach((async e=>{if(t.includes(e.idLocation)){let t={tarif_visio:e.tarif,tarif_cabinet:e.tarif};if(p.Z.get("promotion"))try{const e="https://rdv.sarahnacass.com/api/verificate/promocode";t=(await c().post(e,{promocode:p.Z.get("promotion"),tarif_visio:t.tarif_visio,tarif_cabinet:t.tarif_cabinet})).data.data}catch{}return w((t.tarif_cabinet.value/100).toFixed(2).replace(".",",")+" "+t.tarif_cabinet.symbol||"0,00 \u20ac (prix ind\xe9fini dans le fichier .env)")}})),"err"}throw"err"}catch(n){return void s("Il semble que vous n'avez pas r\xe9serv\xe9 de rendez-vous avant de proc\xe9der au paiement. Veuillez r\xe9server un rendez-vous pour ensuite proc\xe9der au r\xe8glement de celui-ci.")}})()}),[]),(0,r.useEffect)((()=>{if(!b)return;(async()=>{try{const e="https://rdv.sarahnacass.com/api/stripe/getPublicKey",{data:t}=await c().get(e),{publicKey:a}=t;y((0,i.J)(a))}catch(n){s("Une erreur s'est produite lors de la connexion notre service de paiement. V\xe9rifiez votre connexion internet et r\xe9essayez, ou contactez-nous si le probl\xe8me persiste.")}})()}),[b]),(0,r.useEffect)((()=>{if(d&&v&&b)return a(!1)}),[d,v,b]),null!=v)return(0,u.jsx)(f,{children:t?n?(0,u.jsxs)("div",{className:"text-red-600 bg-red-50 text-center px-2 py-2.5 top-0 border border-red-400 rounded font-medium z-30",children:["Attention : ",n]}):(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,u.jsx)("div",{className:"border-t-2 border-portal-500 rounded-full animate-spin w-8 h-8"}),(0,u.jsx)("div",{className:"text-portal-700",children:"Chargement..."})]}):(0,u.jsx)("div",{className:"",children:(0,u.jsx)(o.Elements,{stripe:d,options:{clientSecret:v,appearance:e},children:(0,u.jsx)(h,{price:b})})})})}},6323:(e,t,a)=>{a.d(t,{H:()=>n});const r={calendar:4188028},i={calendar:8698217},n=[{name:"union-europeenne",appointmentTypeIdPaid:67052452,appointmentTypeIdNotPaid:67052463,acuityAddress:"https://us02web.zoom.us/j/89415032352?pwd=Rlp2dDU1ODhGektNZ01MRlg4UCs2Zz09",calendarId:{0:r.calendar},acuityAPI:1,tarif:{value:26400,currency:"eur",symbol:"\u20ac"},formation:!1,path:"/",idLocation:"1001"},{name:"canada",appointmentTypeIdPaid:67053663,appointmentTypeIdNotPaid:67053671,acuityAddress:"https://us02web.zoom.us/j/89415032352?pwd=Rlp2dDU1ODhGektNZ01MRlg4UCs2Zz09",calendarId:{0:i.calendar},acuityAPI:2,tarif:{value:39200,currency:"cad",symbol:"$CAD"},formation:!1,path:"/ca/",idLocation:"1002"},{name:"maroc",appointmentTypeIdPaid:67053663,appointmentTypeIdNotPaid:67053671,acuityAddress:"https://us02web.zoom.us/j/89415032352?pwd=Rlp2dDU1ODhGektNZ01MRlg4UCs2Zz09",calendarId:{0:i.calendar},acuityAPI:2,tarif:{value:39200,currency:"cad",symbol:"$CAD"},formation:!1,path:"/ma/",idLocation:"1003"},{name:"union-europeenne",appointmentTypeIdPaid:67104997,appointmentTypeIdNotPaid:67105035,acuityAddress:"https://us02web.zoom.us/j/89415032352?pwd=Rlp2dDU1ODhGektNZ01MRlg4UCs2Zz09",calendarId:{0:r.calendar},acuityAPI:1,tarif:{value:6900,currency:"eur",symbol:"\u20ac"},formation:!0,path:"/",idLocation:"1004"},{name:"canada",appointmentTypeIdPaid:67105222,appointmentTypeIdNotPaid:67105235,acuityAddress:"https://us02web.zoom.us/j/89415032352?pwd=Rlp2dDU1ODhGektNZ01MRlg4UCs2Zz09",calendarId:{0:i.calendar},acuityAPI:2,tarif:{value:10900,currency:"cad",symbol:"$CAD"},formation:!0,path:"/ca/",idLocation:"1005"},{name:"maroc",appointmentTypeIdPaid:67105222,appointmentTypeIdNotPaid:67105235,acuityAddress:"https://us02web.zoom.us/j/89415032352?pwd=Rlp2dDU1ODhGektNZ01MRlg4UCs2Zz09",calendarId:{0:i.calendar},acuityAPI:2,tarif:{value:10900,currency:"cad",symbol:"$CAD"},formation:!0,path:"/ma/",idLocation:"1006"}]}}]);
//# sourceMappingURL=716.1eee6981.chunk.js.map