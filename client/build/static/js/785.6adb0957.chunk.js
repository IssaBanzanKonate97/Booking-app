"use strict";(self.webpackChunkRDV_ADDICTOLOGUE_COM=self.webpackChunkRDV_ADDICTOLOGUE_COM||[]).push([[785],{3526:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});n(3508);var r=n(2791),a=n(7689),o=n(2109),s=n(2007),i=n.n(s);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=(0,r.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,o=e.size,s=void 0===o?24:o,i=c(e,["color","size"]);return r.createElement("svg",l({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),r.createElement("polyline",{points:"23 4 23 10 17 10"}),r.createElement("polyline",{points:"1 20 1 14 7 14"}),r.createElement("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}))}));d.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},d.displayName="RefreshCw";const u=d,m=n.p+"static/media/map-location-bkg.c2d995d106dd47c49eb9.webp";var p=n(4006),h=n(1574),f=n(2597),v=n(184);function g(){const{createEvent:e}=(0,r.useContext)(h.A),t=(0,a.s0)(),[n,s]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{(0,p.$s)((async n=>{if(!n)return s(!1);s(n);const r=await(0,p.FX)([n.coords.latitude,n.coords.longitude]),a={title:"Vous \xeates proche d'un \xe9tablissement Sarah Nacass",content:"Nous avons trouv\xe9 un \xe9tablissement \xe0 proximit\xe9 de votre position actuelle, nous l'avons automatiquement s\xe9lectionn\xe9 pour vous. Notez que vous pouvez aussi choisir un accompagnement \xe0 distance (en visioconf\xe9rence).",timeOut:25e3,icon:(0,v.jsx)(o.Z,{})};e(a);const i=new URLSearchParams(window.location.search).get("source");i&&localStorage.setItem("source",i),r.region&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"general",localisation_auto:!0,pays:r.pays,region:r.region,source:null!==i&&void 0!==i?i:void 0})),t("".concat(r.path))}),(n=>{e({title:"Nous n'avons pas pu vous g\xe9olocaliser",content:"Nous n'avons pas pu vous g\xe9olocaliser automatiquement, votre navigateur ne semble pas autoriser la g\xe9olocalisation. Vous pouvez tout de m\xeame choisir un \xe9tablissement dans le menu.",timeOut:12e4});const r=new URLSearchParams(window.location.search).get("source");r&&localStorage.setItem("source",r),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"general",localisation_auto:!0,pays:"Introuvable",region:"Introuvable",source:null!==r&&void 0!==r?r:void 0}),s(n),t("/")}))})()}),[t]),(0,r.useEffect)((()=>{if(!0===n)return;const e=setTimeout((()=>{window.location.reload()}),15e3);return()=>{clearTimeout(e)}}),[n]),(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(f.Z,{}),(0,v.jsx)("div",{className:"h-screen w-screen fixed inset-0 z-10 bg-slate-900",children:(0,v.jsx)("img",{src:m,alt:"background",className:"h-full w-full z-20 object-cover opacity-10 blur-sm"})}),(0,v.jsxs)("div",{className:"flex z-30 md:flex-row flex-col roboto items-center fixed justify-center w-full h-screen",children:[(0,v.jsx)("div",{className:"animate-spin text-slate-200 mb-6 md:mb-0",children:(0,v.jsx)(u,{size:22})}),(0,v.jsxs)("div",{className:"md:ml-7",children:[(0,v.jsx)("p",{className:"text-base font-bold text-white text-center md:text-left pb-2 md:pb-0",children:"Chargement en cours ..."}),(0,v.jsx)("p",{className:"text-sm pt-1 mx-9 md:mx-0 text-gray-400 text-center md:text-left",children:"Nous cherchons les \xe9tablissements les plus proches de chez vous."})]})]})]})}},2597:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(2791),a=n(1574),o=n(1898),s=n(184);const i=function(){var e;const{event:t,removeEvent:n}=(0,r.useContext)(a.A),[i,l]=(0,r.useState)("");return t&&(0,s.jsx)("div",{className:"fixed z-[9999] inset-0 overflow-y-auto roboto",children:(0,s.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-900 opacity-80"})}),(0,s.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[(0,s.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,s.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,s.jsx)("div",{className:"mx-auto flex-shrink-0 text-portal-600 flex items-center justify-center h-12 w-12 rounded-full bg-portal-100 sm:mx-0 sm:h-10 sm:w-10",children:t.icon?t.icon:(0,s.jsx)(o.Z,{className:"h-6 w-6","aria-hidden":"true"})}),(0,s.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:t.title?t.title:"Message d'information"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm leading-5 text-gray-500",children:t.content?t.content:"Aucun message \xe0 afficher"})}),(null===(e=t.link)||void 0===e?void 0:e.url)&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("a",{href:t.link.url,className:"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-portal-100 text-base font-medium text-portal-800 hover:bg-portal-50 focus:outline-none transition ease-in-out duration-150 sm:text-sm sm:leading-5",children:t.link.text})}),t.code&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("input",{placeholder:t.code.text,type:t.code.type,id:t.code.id,value:i,onChange:e=>l(e.target.value),className:"w-full border border-slate-300 rounded-md shadow my-1 block py-2.5 px-4 text-slate-600 focus:outline-none focus:border-portal-400"}),(0,s.jsx)("button",{onClick:()=>{t.code.setSecraitaireCode(i),n()},type:"button",className:"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-portal-100 text-base font-medium text-portal-800 hover:bg-portal-50 focus:outline-none transition ease-in-out duration-150 sm:text-sm sm:leading-5",children:"Valider"})]})]})]})}),(0,s.jsx)("div",{className:"p-4 sm:px-6 sm:flex sm:flex-row-reverse bg-gray-50",children:(0,s.jsx)("span",{className:"flex w-full sm:ml-3 sm:w-auto",children:(0,s.jsx)("button",{onClick:n,type:"button",className:"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-portal-100 text-base font-medium text-portal-800 hover:bg-portal-50 focus:outline-none transition ease-in-out duration-150 sm:text-sm sm:leading-5",children:"Fermer le message"})})})]})]})})}},4006:(e,t,n)=>{n.d(t,{$s:()=>l,Ch:()=>v,FX:()=>i,Ml:()=>x,PL:()=>h,QP:()=>u,Qs:()=>g,R3:()=>f,Rw:()=>y,de:()=>w,gg:()=>d,oi:()=>b,v9:()=>p});var r=n(5841);const a=n(4569);function o(e){return e*(Math.PI/180)}const s=e=>{const t=new URLSearchParams(window.location.search);return t.append("sID",e),t.toString()};async function i(e){var t=new Array(r.Kl.length).fill(0);r.Kl.forEach(((n,r)=>{var a=function(e,t,n,r){var a=o(n-e),s=o(r-t),i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(o(e))*Math.cos(o(n))*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371}(e[0],e[1],n.latitude,n.longitude),i={path:"".concat(n.path,"?").concat(s("".concat(n.pathId)),"&alertUserAboutDispatcherSelection=true"),distance:a,region:n.geoZoneName,pays:n.country.name,ville:n.city};t[r]=i}));return t.reduce(((e,t)=>e.distance<t.distance?e:t))}const l=async(e,t)=>navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0}),c=e=>{for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]===e)return decodeURIComponent(r[1])}return!1};function d(e){const t=r.Kl.findIndex((t=>t.path===e));return r.Kl[t].geoZoneName}function u(e){const t=r.CK.findIndex((t=>t.path===e));return r.CK[t].geoZoneName}const m=(e,t,n)=>e.filter((e=>e[t].includes(n))),p=()=>{const e=r.Kl.map((e=>e.country.name));return[...new Set(e)]},h=e=>{const t=r.K5[e];return void 0===t?null:t.name},f=e=>r.Kl.filter((t=>t.country.name===e)),v=()=>r.CK,g=async e=>{if(void 0==e)return["Sarah Nacass - Visio","/visio",0,"0123456789"];const t=m(r.Kl,"path",e);return["Sarah Nacass - "+(e=>{const t=e.country.code;return 2===r.K5[t].depthOfCoverage?e.geoZoneName:e.country.name})(t[0]),t,t[t.length-1].pathId,t[0].phone]},x=async()=>{const e=m(r.CK,"path","/residentiel");return["Sarah Nacass - "+e[0].country.name,e,e[e.length-1].pathId,"+33 01 76 27 82 67"]},y=e=>{const t=c("selectedDispatcher"),n=c("sID"),r=!1===t?parseInt(n):parseInt(t);return!1===n&&!1!==t&&(e=>{const t=new URL(window.location.href),n=new URLSearchParams(t.search);n.set("sID",e),n.delete("selectedDispatcher"),window.history.replaceState({},"","".concat(t.pathname,"?").concat(n.toString()))})(r),isNaN(r)||r>e||r<0?0:r},w=()=>{const e=localStorage.getItem("last_booking_operation");if(null===e||void 0===e)return{status:!1,datas:null};return{status:!0,datas:JSON.parse(e)}},b=async e=>{try{const t="https://rdv.sarahnacass.com/api/reservations/check-times",n=new Date(e.clientSavedAtTime),r=new Date;if(0===e.typeId){const e=new Date(n);if(e.setDate(n.getDate()+1),e<r)return!1}else if(1===e.typeId){const e=new Date(n);if(e.setHours(n.getHours()+1),e<r)return!1}return await a.post(t,{typeId:e.typeId,isoDate:e.isoDate,appointmentTypeIdPaid:e.appointmentTypeIdPaid,calendarId:e.calendarId}),!0}catch{return!1}}},1898:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(2791),a=n(2007),o=n.n(a);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=(0,r.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,o=e.size,l=void 0===o?24:o,c=i(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),r.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),r.createElement("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"}))}));l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="AlertCircle";const c=l},2109:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(2791),a=n(2007),o=n.n(a);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=(0,r.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,o=e.size,l=void 0===o?24:o,c=i(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),r.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),r.createElement("circle",{cx:"12",cy:"10",r:"3"}))}));l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="MapPin";const c=l},3508:()=>{}}]);
//# sourceMappingURL=785.6adb0957.chunk.js.map